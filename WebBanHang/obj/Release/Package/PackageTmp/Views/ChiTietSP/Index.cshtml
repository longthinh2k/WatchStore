
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
    var thanhvien = ViewBag.ThanhVien != null ? (List<WebBanHang.Models.EF.tbl_ThanhVien>)ViewBag.ThanhVien : new List<WebBanHang.Models.EF.tbl_ThanhVien>();
}
@model WebBanHang.Models.EF.tbl_SanPham
@using WebBanHang.Models.EF
<div class="pd-wrap">
    <div class="container">
        <div class="heading-section">
            <h2>CHI TIẾT SẢN PHẨM</h2>
        </div>
        <div class="row">
            <!-- CArouse-->
            <div id="carouselExampleControls" class="carousel slide col-md-6" data-ride="carousel">
                <div class="carousel-inner">
                    <div class="carousel-item active">
                        <img src="@Model.anhsp1" class="d-block w-100" alt="...">
                    </div>
                    <div class="carousel-item">
                        <img src="@Model.anhsp2" class="d-block w-100" alt="...">
                    </div>
                    <div class="carousel-item">
                        <img src="@Model.anhsp3" class="d-block w-100" alt="...">
                    </div>
                </div>
                <a class="carousel-control-prev" href="#carouselExampleControls" role="button" data-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="sr-only">Previous</span>
                </a>
                <a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="sr-only">Next</span>
                </a>
            </div>
            <!-- end CArouse-->
            <div class="col-md-6">
                <div class="product-dtl">
                    <div class="product-info">
                        <div class="product-name">@Model.tensp</div>
                        <div class="reviews-counter">
                            <div class="rate">
                                <input type="radio" id="star5" name="rate" value="5" checked />
                                <label for="star5" title="text">5 stars</label>
                                <input type="radio" id="star4" name="rate" value="4" checked />
                                <label for="star4" title="text">4 stars</label>
                                <input type="radio" id="star3" name="rate" value="3" checked />
                                <label for="star3" title="text">3 stars</label>
                                <input type="radio" id="star2" name="rate" value="2" />
                                <label for="star2" title="text">2 stars</label>
                                <input type="radio" id="star1" name="rate" value="1" />
                                <label for="star1" title="text">1 star</label>
                            </div>

                        </div>
                        <div class="product-price-discount"><span> @Convert.ToSingle(Model.giasanpham).ToString("#,### VND")</span></div>
                    </div>
                    <p>@Model.motasanpham2</p>

                    <div class="product-count">

                        <div class="btn-box">
                            <button class="mycart-button">
                                <span class="add-to-cart">@Ajax.ActionLink("Thêm Vào Giỏ Hàng", "ThemGioHang", "GioHang", new { @iMaSP = Model.masp, @strURL = Request.Url.ToString() }, new AjaxOptions { HttpMethod = "GET", UpdateTargetId = "GioHangdiv", InsertionMode = InsertionMode.Replace }, new { @class = "form-control btn ", @style = "background-color:#8019c8; color:white;width:200px;" })</span>
                                @*<span class="added">Thêm thành công</span>*@
                                <i class='bx bxs-cart'></i>
                                <i class='bx bxl-bitcoin'></i>
                            </button>
                            </div>

                       
                </div>
            </div>
        </div>
        <div class="product-info-tabs">
            <ul class="nav nav-tabs" id="myTab" role="tablist">
                <li class="nav-item">
                    <a class="nav-link active" id="description-tab" data-toggle="tab" href="#description" role="tab" aria-controls="description" aria-selected="true">Mô Tả</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" id="review-tab" data-toggle="tab" href="#review" role="tab" aria-controls="review" aria-selected="false">Đánh Giá</a>
                </li>
            </ul>
            <div class="tab-content" id="myTabContent">
                <div class="tab-pane fade show active" id="description" role="tabpanel" aria-labelledby="description-tab">
                    <h2>@Model.motasanpham1</h2> <br />
                    <h6>@Model.motasanpham3</h6> <br />
                    <h6>@Model.motasanpham4</h6> <br />
                    <Center> <img src="@Model.anhsp4" style="width:700px; height:800px;" /></Center>

                </div>

                @*Đánh giá sản phẩm*@
                <div class="tab-pane fade" id="review" role="tabpanel" aria-labelledby="review-tab">
                    <div class="review-heading">ĐÁNH GIÁ: @Model.tensp  </div>

                    <p class="mb-20">Mời các bạn đánh giá sản phẩm tại đây!</p>
                    <form class="review-form">

                        <div class="form-group">

                            <section class="content-item" id="comments">
                                <div class="container">
                                    <div class="row">
                                        <div class="col-sm-11">
                                            <form>
                                                <fieldset>

                                                    <div class="row">
                                                        <div class="col-sm-3 col-lg-2 hidden-xs">
                                                            <img class="img-responsive" src="https://cdn-icons-png.flaticon.com/512/1077/1077012.png" style="width:80px;" alt="">
                                                        </div>
                                                        <div class="form-group col-xs-12 col-sm-9 col-lg-10">
                                                            <input type="hidden" id="idsp" value="@Model.masp" />
                                                            <input class="form-control" id="textbl" placeholder="Nhập bình luận của bạn" />
                                                            <button id="btnpost" class="btn btn-outline-primary " data-mdb-ripple-color="dark">Bình luận</button>
                                                        </div>
                                                    </div>
                                                </fieldset>
                                            </form>

                                            <h3>Bình luận</h3>

                                            <!-- COMMENT 1 - START -->
                                            <div class="media">
                                                <a class="pull-left" href="#"><img class="media-object" src="~/Assets/Admin/icon/lt.png" alt=""></a>
                                                <div class="media-body">
                                                    <h4 class="media-heading">Long Thịnh ( ADMIN MENTIME)</h4>
                                                    <p>
                                                        Chúc bạn một ngày đầy may mắn ^^ hãy góp ý chúng tôi bằng những bình luận thật lòng nhé !
                                                    </p>
                                                    <ul class="list-unstyled list-inline media-detail pull-left">
                                                        <li><i class="fa fa-calendar"></i>1/11/2021</li>

                                                    </ul>

                                                </div>
                                            </div>
                                            <!-- COMMENT 1 - END -->

                                            @foreach (var item in ViewBag.BinhLuan)
                                            {


                                                var tv = thanhvien != null && thanhvien.Count > 0 ? thanhvien.Where(n => n.MaThanhVien == item.makhachhang).FirstOrDefault() : new tbl_ThanhVien(); ;
                                                var HotenThanhVien = tv != null && !string.IsNullOrEmpty(tv.HoTen) ? tv.HoTen : string.Empty;
                                             
                                                <!-- COMMENT 2 - START -->
                                                <div class="media">
                                                    <a class="pull-left" href="#"><img class="media-object" src="https://cdn-icons-png.flaticon.com/512/1077/1077012.png" alt=""></a>
                                                    <div class="media-body">
                                                        <h4 class="media-heading">@HotenThanhVien</h4>
                                                        @*<h4>@Html.DropDownList("makhachhang",null, htmlAttributes: new { @style = "border:0px", @disabled = "disabled" })</h4>*@
                                                        <p>
                                                            @item.noidung
                                                        </p>
                                                        <ul class="list-unstyled list-inline media-detail pull-left">
                                                            <li><i class="fa fa-calendar"></i>@item.ngaybinhluan</li>

                                                        </ul>

                                                    </div>
                                                </div>
                                                <!-- COMMENT 2 - END -->
                                            }

                                        </div>
                                    </div>
                                </div>
                            </section>

                        </div>
                    </form>


                </div>
            </div>


        </div>
    </div>


    <script src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>
    @*<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>*@


    <style>


        .content-item {
            padding: 30px 0;
            background-color: #FFFFFF;
        }

            .content-item.grey {
                background-color: #F0F0F0;
                padding: 50px 0;
                height: 100%;
            }

            .content-item h2 {
                font-weight: 700;
                font-size: 35px;
                line-height: 45px;
                text-transform: uppercase;
                margin: 20px 0;
            }

            .content-item h3 {
                font-weight: 400;
                font-size: 20px;
                color: #555555;
                margin: 10px 0 15px;
                padding: 0;
            }

        .content-headline {
            height: 1px;
            text-align: center;
            margin: 20px 0 70px;
        }

            .content-headline h2 {
                background-color: #FFFFFF;
                display: inline-block;
                padding: 0 20px;
            }

        .grey .content-headline h2 {
            background-color: #F0F0F0;
        }

        .content-headline h3 {
            font-size: 14px;
            color: #AAAAAA;
            display: block;
        }


        #comments {
            box-shadow: 0 -1px 6px 1px rgba(0,0,0,0.1);
            background-color: #FFFFFF;
        }

            #comments form {
                margin-bottom: 30px;
            }

            #comments .btn {
                margin-top: 7px;
            }

            #comments form fieldset {
                clear: both;
            }

            #comments form textarea {
                height: 100px;
            }

            #comments .media {
                border-top: 1px dashed #DDDDDD;
                padding: 20px 0;
                margin: 0;
            }

                #comments .media > .pull-left {
                    margin-right: 20px;
                }

                #comments .media img {
                    max-width: 100px;
                }

                #comments .media h4 {
                    margin: 0 0 10px;
                }

                    #comments .media h4 span {
                        font-size: 14px;
                        float: right;
                        color: #999999;
                    }

                #comments .media p {
                    margin-bottom: 15px;
                    text-align: justify;
                }

            #comments .media-detail {
                margin: 0;
            }

                #comments .media-detail li {
                    color: #AAAAAA;
                    font-size: 12px;
                    padding-right: 10px;
                    font-weight: 600;
                }

                #comments .media-detail a:hover {
                    text-decoration: underline;
                }

                #comments .media-detail li:last-child {
                    padding-right: 0;
                }

                #comments .media-detail li i {
                    color: #666666;
                    font-size: 15px;
                    margin-right: 10px;
                }
    </style>
    <script>
        $(document).ready(function () {
            $("#btnpost").click(function () {
                $.ajax({
                    type: "post",
                    url: "/ChiTietSP/PostBinhLuan",
                    data: {
                        id: $("#idsp").val(),
                        binhluan: $("#textbl").val(),
                    },
                    success: function (data) {
                        var code = data.ResponseCode;
                        var des = data.Description;
                        var Extended = data.Extended;
                        if (code > 0) {
                            alert(des);
                            window.location.href = "/ChiTietSP/Index/" + id + ""
                        } else {
                            alert(des);
                        }

                    }
                });

            });
        });
    </script>


